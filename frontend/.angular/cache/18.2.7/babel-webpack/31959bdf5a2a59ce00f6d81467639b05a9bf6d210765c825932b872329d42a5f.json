{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { CartService } from '../services/cart.service';\nimport { AuthDialogComponent } from './auth-dialog.component';\nimport { ProductService } from '../services/product.service';\nlet AppComponent = class AppComponent {\n  constructor(dialog, router, route, cart, productService) {\n    this.dialog = dialog;\n    this.router = router;\n    this.route = route;\n    this.cart = cart;\n    this.productService = productService;\n    this.cartCount = 0;\n    this.searchQuery = '';\n  }\n  ngOnInit() {\n    this.cart.cart$.subscribe(items => {\n      this.cartCount = items.reduce((s, i) => s + (i.qty || 1), 0);\n    });\n    // если пришёл параметр search — заполнить поле\n    this.route.queryParams.subscribe(q => {\n      if (q['search']) this.searchQuery = q['search'];\n    });\n  }\n  applyFilter(event) {\n    const value = event.target.value.trim();\n    this.searchQuery = value;\n    this.router.navigate(['/'], {\n      queryParams: {\n        search: value\n      }\n    });\n  }\n  openAuth(mode = 'login') {\n    const ref = this.dialog.open(AuthDialogComponent, {\n      width: '420px',\n      data: {\n        mode\n      }\n    });\n    ref.afterClosed().subscribe(() => {});\n  }\n};\nAppComponent = __decorate([Component({\n  selector: 'app-root',\n  templateUrl: './components/app.component.html'\n}), __metadata(\"design:paramtypes\", [MatDialog, Router, ActivatedRoute, CartService, ProductService])], AppComponent);\nexport { AppComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}