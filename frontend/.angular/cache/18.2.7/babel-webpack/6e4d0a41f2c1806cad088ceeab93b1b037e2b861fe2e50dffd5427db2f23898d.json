{"ast":null,"code":"import { MatDialog } from '@angular/material/dialog';\nimport { Router } from '@angular/router';\nimport { AuthDialogComponent } from './auth-dialog.component';\nimport { ProductService } from '../services/product.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/product.service\";\nimport * as i4 from \"@angular/material/input\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/badge\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"@angular/material/toolbar\";\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(dialog, router, productService) {\n      this.dialog = dialog;\n      this.router = router;\n      this.productService = productService;\n      this.title = 'Perfume Shop';\n      this.cartItemCount = 0;\n      this.searchQuery = '';\n    }\n    ngOnInit() {\n      this.updateCartCount();\n      // если в ProductService есть Observable для корзины — подписываемся\n      // this.productService.cart$.subscribe(() => this.updateCartCount());\n    }\n    /** Обновление количества товаров в корзине */\n    updateCartCount() {\n      const cartItems = this.productService.getCart();\n      this.cartItemCount = cartItems?.length || 0;\n    }\n    /** Открыть диалог авторизации / регистрации */\n    openAuthDialog(mode) {\n      const dialogRef = this.dialog.open(AuthDialogComponent, {\n        width: '400px',\n        data: {\n          mode\n        }\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        // после авторизации — обновляем корзину\n        this.updateCartCount();\n      });\n    }\n    /** Переход по маршруту (например: /cart, /checkout, /) */\n    navigateTo(path) {\n      this.router.navigate([path]);\n      // через короткий таймаут обновим количество товаров\n      setTimeout(() => this.updateCartCount(), 200);\n    }\n    /** Обработка поиска */\n    search() {\n      const query = this.searchQuery.trim();\n      if (query) {\n        // переход на главную с параметром поиска\n        this.router.navigate(['/'], {\n          queryParams: {\n            search: query\n          }\n        });\n        console.log('Поиск:', query);\n      }\n    }\n    static {\n      this.ɵfac = function AppComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AppComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ProductService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AppComponent,\n        selectors: [[\"app-root\"]],\n        decls: 24,\n        vars: 1,\n        consts: [[\"color\", \"primary\", 1, \"navbar\"], [1, \"logo\"], [1, \"accent\"], [\"appearance\", \"outline\", 1, \"search-bar\"], [\"matInput\", \"\", \"placeholder\", \"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440, \\u0434\\u0443\\u0445\\u0438 Chanel...\", 3, \"keyup\"], [\"mat-icon-button\", \"\", \"matSuffix\", \"\"], [1, \"nav-buttons\"], [\"mat-button\", \"\", \"routerLink\", \"/\"], [\"mat-button\", \"\", \"routerLink\", \"/catalog\"], [\"mat-button\", \"\", \"routerLink\", \"/cart\", \"matBadgeColor\", \"accent\", 3, \"matBadge\"], [\"mat-stroked-button\", \"\", \"color\", \"accent\", \"routerLink\", \"/auth\"]],\n        template: function AppComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"mat-toolbar\", 0)(1, \"span\", 1);\n            i0.ɵɵtext(2, \"Beauty\");\n            i0.ɵɵelementStart(3, \"span\", 2);\n            i0.ɵɵtext(4, \"Shop\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(5, \"mat-form-field\", 3)(6, \"mat-label\");\n            i0.ɵɵtext(7, \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"input\", 4);\n            i0.ɵɵlistener(\"keyup\", function AppComponent_Template_input_keyup_8_listener($event) {\n              return ctx.applyFilter($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"button\", 5)(10, \"mat-icon\");\n            i0.ɵɵtext(11, \"search\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(12, \"div\", 6)(13, \"button\", 7);\n            i0.ɵɵtext(14, \"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"button\", 8);\n            i0.ɵɵtext(16, \"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"button\", 9)(18, \"mat-icon\");\n            i0.ɵɵtext(19, \"shopping_cart\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(20, \" \\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430 \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"button\", 10);\n            i0.ɵɵtext(22, \"\\u0412\\u043E\\u0439\\u0442\\u0438\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelement(23, \"router-outlet\");\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(17);\n            i0.ɵɵpropertyInterpolate(\"matBadge\", ctx.cartCount);\n          }\n        },\n        dependencies: [i4.MatInput, i5.MatFormField, i5.MatLabel, i5.MatSuffix, i6.MatButton, i6.MatIconButton, i7.MatBadge, i8.MatIcon, i9.MatToolbar],\n        styles: [\".navbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 2rem;background:linear-gradient(90deg,#f8bbd0,#f48fb1);color:#fff;box-shadow:0 4px 10px #00000026}.logo[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fff}.accent[_ngcontent-%COMP%]{color:#ffebee}.search-bar[_ngcontent-%COMP%]{flex:1;margin:0 2rem;max-width:500px}.nav-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;font-weight:500;transition:all .3s ease}.nav-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}\"]\n      });\n    }\n  }\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}