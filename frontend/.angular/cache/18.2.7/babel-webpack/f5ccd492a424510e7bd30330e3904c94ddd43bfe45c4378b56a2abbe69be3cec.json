{"ast":null,"code":"import { MatDialogRef } from '@angular/material/dialog';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { ApiService } from '../services/api.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"../services/api.service\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nfunction AuthDialogComponent_mat_form_field_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 1)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 3);\n    i0.ɵɵelementEnd();\n  }\n}\nexport let AuthDialogComponent = /*#__PURE__*/(() => {\n  class AuthDialogComponent {\n    constructor(dialogRef, api, snack) {\n      this.dialogRef = dialogRef;\n      this.api = api;\n      this.snack = snack;\n      this.username = '';\n      this.password = '';\n      this.full_name = '';\n    }\n    login() {\n      this.api.login(this.username, this.password).subscribe({\n        next: res => {\n          this.api.setToken(res.access_token);\n          this.snack.open('Logged in', '', {\n            duration: 1500\n          });\n          this.dialogRef.close();\n        },\n        error: () => this.snack.open('Login failed', '', {\n          duration: 2000\n        })\n      });\n    }\n    register() {\n      this.api.register(this.username, this.password, this.full_name).subscribe({\n        next: res => {\n          this.api.setToken(res.access_token);\n          this.snack.open('Registered & logged in', '', {\n            duration: 1500\n          });\n          this.dialogRef.close();\n        },\n        error: () => this.snack.open('Register failed', '', {\n          duration: 2000\n        })\n      });\n    }\n    close() {\n      this.dialogRef.close();\n    }\n    static {\n      this.ɵfac = function AuthDialogComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AuthDialogComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AuthDialogComponent,\n        selectors: [[\"app-auth-dialog\"]],\n        decls: 17,\n        vars: 3,\n        consts: [[\"mat-dialog-title\", \"\"], [\"appearance\", \"outline\", 1, \"full-width\"], [\"matInput\", \"\", \"type\", \"email\"], [\"matInput\", \"\", \"type\", \"password\"], [\"appearance\", \"outline\", \"class\", \"full-width\", 4, \"ngIf\"], [\"align\", \"end\"], [\"mat-stroked-button\", \"\", \"mat-dialog-close\", \"\"], [\"mat-flat-button\", \"\", \"color\", \"primary\"]],\n        template: function AuthDialogComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"h2\", 0);\n            i0.ɵɵtext(1);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(2, \"mat-dialog-content\")(3, \"mat-form-field\", 1)(4, \"mat-label\");\n            i0.ɵɵtext(5, \"Email\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(6, \"input\", 2);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"mat-form-field\", 1)(8, \"mat-label\");\n            i0.ɵɵtext(9, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(10, \"input\", 3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(11, AuthDialogComponent_mat_form_field_11_Template, 4, 0, \"mat-form-field\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"mat-dialog-actions\", 5)(13, \"button\", 6);\n            i0.ɵɵtext(14, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"button\", 7);\n            i0.ɵɵtext(16);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate(ctx.data.mode === \"login\" ? \"\\u0412\\u0445\\u043E\\u0434\" : \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\");\n            i0.ɵɵadvance(10);\n            i0.ɵɵproperty(\"ngIf\", ctx.data.mode === \"register\");\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate(ctx.data.mode === \"login\" ? \"\\u0412\\u043E\\u0439\\u0442\\u0438\" : \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\");\n          }\n        },\n        dependencies: [i4.NgIf, i5.MatButton, i6.MatFormField, i6.MatLabel, i7.MatInput, i1.MatDialogClose, i1.MatDialogTitle, i1.MatDialogActions, i1.MatDialogContent],\n        encapsulation: 2\n      });\n    }\n  }\n  return AuthDialogComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}