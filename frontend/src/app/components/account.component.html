<div class="account-container">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="account-header">
      <div class="header-content">
        <div class="header-icon">üë§</div>
        <div class="header-text">
          <h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
          <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—à–∏–º–∏ –∑–∞–∫–∞–∑–∞–º–∏ –∏ –ø—Ä–æ—Ñ–∏–ª–µ–º</p>
        </div>
      </div>
    </div>
  
    <div class="account-content">
      <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é -->
      <div class="account-sidebar">
        <div class="sidebar-card">
          <div class="user-avatar">
            <mat-icon class="avatar-icon">account_circle</mat-icon>
            <div class="avatar-status"></div>
          </div>
          <div class="user-info" *ngIf="customerData">
            <h3>{{ customerData.name }}</h3>
            <p>{{ customerData.email }}</p>
          </div>
          <div class="user-info" *ngIf="!customerData">
            <h3>–ì–æ—Å—Ç—å</h3>
            <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å</p>
          </div>
        </div>
  
        <nav class="sidebar-nav">
          <button 
            class="nav-item" 
            [class.active]="activeTab === 'profile'"
            (click)="setActiveTab('profile')"
          >
            <mat-icon>person</mat-icon>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
          </button>
          <button 
            class="nav-item" 
            [class.active]="activeTab === 'active-orders'"
            (click)="setActiveTab('active-orders')"
          >
            <mat-icon>local_shipping</mat-icon>
            <span>–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã</span>
            <span class="badge" *ngIf="getActiveOrders().length > 0">
              {{ getActiveOrders().length }}
            </span>
          </button>
          <button 
            class="nav-item" 
            [class.active]="activeTab === 'order-history'"
            (click)="setActiveTab('order-history')"
          >
            <mat-icon>history</mat-icon>
            <span>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</span>
          </button>
        </nav>
      </div>
  
      <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
      <div class="account-main">
        <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
        <div *ngIf="activeTab === 'profile'" class="tab-content">
          <div class="tab-header">
            <h2>–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            <p>–í–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</p>
          </div>
          
          <div *ngIf="customerData; else noProfile" class="profile-content">
            <div class="info-cards">
              <div class="info-card">
                <div class="card-header">
                  <mat-icon class="card-icon">contact_mail</mat-icon>
                  <h3>–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                </div>
                <div class="card-content">
                  <div class="info-row">
                    <span class="info-label">–§–ò–û:</span>
                    <span class="info-value">{{ customerData.name }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">Email:</span>
                    <span class="info-value">{{ customerData.email }}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
                    <span class="info-value">{{ customerData.phone }}</span>
                  </div>
                </div>
              </div>
  
              <div class="info-card">
                <div class="card-header">
                  <mat-icon class="card-icon">location_on</mat-icon>
                  <h3>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</h3>
                </div>
                <div class="card-content">
                  <div class="info-row">
                    <span class="info-label">–ê–¥—Ä–µ—Å:</span>
                    <span class="info-value">{{ customerData.address }}</span>
                  </div>
                  <div *ngIf="customerData.postalCode" class="info-row">
                    <span class="info-label">–ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å:</span>
                    <span class="info-value">{{ customerData.postalCode }}</span>
                  </div>
                </div>
              </div>
            </div>
  
            <div class="profile-note">
              <mat-icon>info</mat-icon>
              <p>–î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–∫–∞–∑–µ</p>
            </div>
          </div>
  
          <ng-template #noProfile>
            <div class="no-data">
              <div class="no-data-icon">üí´</div>
              <h3>–ü—Ä–æ—Ñ–∏–ª—å –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω</h3>
              <p>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞</p>
              <button 
                mat-raised-button 
                color="primary" 
                class="action-btn"
                (click)="goToCatalog()"
              >
                <mat-icon>store</mat-icon>
                –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º
              </button>
            </div>
          </ng-template>
        </div>
  
        <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã -->
        <div *ngIf="activeTab === 'active-orders'" class="tab-content">
          <div class="tab-header">
            <h2>–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã</h2>
            <p>–¢–µ–∫—É—â–∏–µ –∑–∞–∫–∞–∑—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏</p>
          </div>
          
          <div *ngIf="getActiveOrders().length > 0; else noActiveOrders" class="orders-grid">
            <div *ngFor="let order of getActiveOrders()" class="order-card">
              <div class="order-header">
                <div class="order-info">
                  <h3>–ó–∞–∫–∞–∑ #{{ order.id }}</h3>
                  <span class="order-date">{{ order.date | date:'dd.MM.yyyy HH:mm' }}</span>
                </div>
                <span class="status-badge" [class]="getStatusClass(order.status)">
                  {{ getStatusText(order.status) }}
                </span>
              </div>
              
              <div class="order-items">
                <div *ngFor="let item of order.items" class="order-item">
                  <div class="item-info">
                    <span class="item-name">{{ item.product_title }}</span>
                    <span class="item-details">{{ item.quantity }} √ó {{ item.price }} ‚ÇΩ</span>
                  </div>
                  <span class="item-total">{{ item.price * item.quantity }} ‚ÇΩ</span>
                </div>
              </div>
              
              <div class="order-footer">
                <div class="order-address">
                  <mat-icon>location_on</mat-icon>
                  <span>{{ order.customer.address }}</span>
                </div>
                <div class="order-total">
                  <span>–ò—Ç–æ–≥–æ:</span>
                  <strong>{{ order.total }} ‚ÇΩ</strong>
                </div>
              </div>
            </div>
          </div>
  
          <ng-template #noActiveOrders>
            <div class="no-data">
              <div class="no-data-icon">üöö</div>
              <h3>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤</h3>
              <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤–∞—à–∏ —Ç–µ–∫—É—â–∏–µ –∑–∞–∫–∞–∑—ã</p>
              <button 
                mat-raised-button 
                color="primary" 
                class="action-btn"
                (click)="goToCatalog()"
              >
                <mat-icon>store</mat-icon>
                –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º
              </button>
            </div>
          </ng-template>
        </div>
  
        <!-- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ -->
        <div *ngIf="activeTab === 'order-history'" class="tab-content">
          <div class="tab-header">
            <h2>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h2>
            <p>–í—Å–µ –≤–∞—à–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã</p>
          </div>
          
          <div *ngIf="getCompletedOrders().length > 0; else noOrderHistory" class="orders-grid">
            <div *ngFor="let order of getCompletedOrders()" class="order-card completed">
              <div class="order-header">
                <div class="order-info">
                  <h3>–ó–∞–∫–∞–∑ #{{ order.id }}</h3>
                  <span class="order-date">{{ order.date | date:'dd.MM.yyyy HH:mm' }}</span>
                </div>
                <span class="status-badge" [class]="getStatusClass(order.status)">
                  {{ getStatusText(order.status) }}
                </span>
              </div>
              
              <div class="order-items">
                <div *ngFor="let item of order.items" class="order-item">
                  <div class="item-info">
                    <span class="item-name">{{ item.product_title }}</span>
                    <span class="item-details">{{ item.quantity }} √ó {{ item.price }} ‚ÇΩ</span>
                  </div>
                  <span class="item-total">{{ item.price * item.quantity }} ‚ÇΩ</span>
                </div>
              </div>
              
              <div class="order-footer">
                <div class="order-comment" *ngIf="order.comment">
                  <mat-icon>chat_bubble</mat-icon>
                  <span>{{ order.comment }}</span>
                </div>
                <div class="order-total">
                  <span>–ò—Ç–æ–≥–æ:</span>
                  <strong>{{ order.total }} ‚ÇΩ</strong>
                </div>
              </div>
            </div>
          </div>
  
          <ng-template #noOrderHistory>
            <div class="no-data">
              <div class="no-data-icon">üì¶</div>
              <h3>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ –ø—É—Å—Ç–∞</h3>
              <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤–∞—à–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã</p>
              <button 
                mat-raised-button 
                color="primary" 
                class="action-btn"
                (click)="goToCatalog()"
              >
                <mat-icon>shopping_bag</mat-icon>
                –°–¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑
              </button>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>