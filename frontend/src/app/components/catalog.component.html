<div class="catalog-container">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <div class="catalog-header">
    <h1>üå∏ –ö–æ–ª–ª–µ–∫—Ü–∏—è –ø–∞—Ä—Ñ—é–º–µ—Ä–∏–∏</h1>
    <p>–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –º–∏—Ä –∏–∑—ã—Å–∫–∞–Ω–Ω—ã—Ö –∞—Ä–æ–º–∞—Ç–æ–≤</p>
  </div>

  <!-- –§–∏–ª—å—Ç—Ä—ã -->
  <div class="filters-section">
    <!-- –ü–æ–∏—Å–∫ -->
    <div class="search-box">
      <input 
        type="text" 
        [value]="searchQuery"
        (input)="onSearchChange($event)"
        placeholder="–ü–æ–∏—Å–∫ –ø–∞—Ä—Ñ—é–º–∞..."
        class="search-input"
      >
      <span class="search-icon">üîç</span>
    </div>

    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
    <div class="category-filters">
      <button 
        [class.active]="selectedCategory === 'all'"
        (click)="onCategoryChange('all')"
        class="category-btn"
      >
        –í—Å–µ –∞—Ä–æ–º–∞—Ç—ã
      </button>
      <button 
        [class.active]="selectedCategory === 'women'"
        (click)="onCategoryChange('women')"
        class="category-btn"
      >
        üë© –ñ–µ–Ω—Å–∫–∏–µ
      </button>
      <button 
        [class.active]="selectedCategory === 'men'"
        (click)="onCategoryChange('men')"
        class="category-btn"
      >
        üë® –ú—É–∂—Å–∫–∏–µ
      </button>
    </div>
  </div>

  <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö -->
  <div *ngIf="searchQuery || selectedCategory !== 'all'" class="results-info">
    <p>
      –ù–∞–π–¥–µ–Ω–æ {{filteredProducts.length}} —Ç–æ–≤–∞—Ä–æ–≤ 
      <span *ngIf="searchQuery">–ø–æ –∑–∞–ø—Ä–æ—Å—É "{{searchQuery}}"</span>
      <span *ngIf="selectedCategory !== 'all'">–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "{{getCategoryName(selectedCategory)}}"</span>
    </p>
    <button 
      *ngIf="filteredProducts.length === 0"
      (click)="searchQuery = ''; selectedCategory = 'all'; filterProducts()"
      class="clear-filters-btn"
    >
      –û—á–∏—Å—Ç–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
    </button>
  </div>

  <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
  <div *ngIf="isLoading" class="loading">
    <div class="spinner"></div>
    <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–ª–ª–µ–∫—Ü–∏—é –∞—Ä–æ–º–∞—Ç–æ–≤...</p>
  </div>

  <!-- –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ -->
  <div *ngIf="!isLoading" class="products-container">
    <mat-card
      *ngFor="let product of filteredProducts"
      class="product-card"
      [class.women]="product.category === 'women'"
      [class.men]="product.category === 'men'"
    >
      <div class="product-image-container">
        <img 
          mat-card-image 
          [src]="product.image" 
          [alt]="product.name"
          (error)="product.image = 'assets/images/no-image.png'"
          class="product-image"
        />
        <div class="category-badge" [class]="product.category">
          {{ product.category === 'women' ? 'üë©' : 'üë®' }}
        </div>
        <div class="product-overlay">
          <button 
            mat-raised-button 
            color="primary" 
            class="quick-view-btn"
            (click)="openProduct(product)"
          >
            –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
          </button>
        </div>
      </div>

      <mat-card-content class="product-content">
        <h3 class="product-name">{{ product.name }}</h3>
        <p class="product-description">{{ product.description }}</p>
        <div class="product-price">{{ product.price | number }} ‚ÇΩ</div>
      </mat-card-content>

      <div class="product-actions">
        <button 
          mat-raised-button 
          color="primary" 
          class="add-to-cart-btn"
          (click)="addToCart(product); $event.stopPropagation()"
        >
          <span class="btn-icon">üõí</span>
          –í –∫–æ—Ä–∑–∏–Ω—É
        </button>
      </div>
    </mat-card>
  </div>

  <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ -->
  <div *ngIf="!isLoading && filteredProducts.length === 0" class="no-products">
    <div class="no-products-icon">üí´</div>
    <h3>–ê—Ä–æ–º–∞—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
    <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é</p>
    <button 
      mat-raised-button 
      color="primary"
      (click)="searchQuery = ''; selectedCategory = 'all'; filterProducts()"
      class="show-all-btn"
    >
      –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∞—Ä–æ–º–∞—Ç—ã
    </button>
  </div>
</div>